:root{
  --sky:#cfefff; --sea:#78c9ff; --sand:#fffae1;
  --red:#ff5468; --green:#2ecc71; --blue:#46a2ff; --yellow:#f5c542;
}

*{ box-sizing:border-box }
html, body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  overflow:hidden;
  font-family:"Nunito", system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  background:linear-gradient(var(--sky) 0 45%, var(--sea) 45% 55%, var(--sand) 55%);
}
body{
  display:flex; flex-direction:column; align-items:center;
}

.hide{ display:none !important }

/* Header HUD */
header{
  width:100%; max-width:1100px; margin:8px 0 6px; padding:8px 12px;
  background:#ffffffcc; border:3px solid #00000010; border-radius:18px;
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  box-shadow:0 8px 18px rgba(0,0,0,.08);
  position:relative; z-index:2;
  flex-shrink:0;
}
h1{ margin:0; font-size:20px }
#hud{ display:flex; gap:14px; align-items:center; font-weight:900; flex-wrap:wrap }
.chip{ background:#0001; border:2px solid #0002; padding:4px 10px; border-radius:999px }
#reset{ background:var(--blue); color:#fff; border:3px solid #0003; border-radius:12px; padding:8px 12px; font-weight:800; cursor:pointer }

/* hint */
.hint{
  position:absolute; bottom:-80px;
  left: 50%;
  transform: translateX(-50%);
  background:#fff; border:3px solid #0003; border-radius:12px;
  padding:6px 12px; font-size:13px; font-weight:700;
  box-shadow:2px 2px 6px rgba(0,0,0,.1);
  z-index:0;
  white-space:nowrap;
}

/* Stage */
.stage{
  width:100%; max-width:1100px;
  display:grid; gap:14px; grid-template-columns:1fr 1.2fr;
  padding:12px 0 12px;
  position:relative; z-index:1;
  flex:1;
  overflow:hidden;
  min-height:0;
}
.left,.right{
  background:transparent; border:none; box-shadow:none; border-radius:0;
  padding:8px; position:relative;
  overflow:visible;
  min-height:0;
}
.scene-host{ width:100%; height:100%; display:flex; align-items:center; justify-content:center; opacity:.08 }

/* Mascot */
.mascot{
  position:absolute; left:0px; bottom:80px;
  display:flex; align-items:flex-end; gap:8px;
  z-index:1;
}
.mascot img{
  /* ▶ 更大但自适应：手机不挤爆，桌面更显眼 */
  width: clamp(120px, 15vw, 260px);
  height:auto;

  background-color: transparent !important;
  border-radius: 0 !important;
  box-shadow: none !important;
  image-rendering:auto;
}

/* === Bigger speech bubble & text === */
.bubble{
  position:absolute;
  display:inline-block;
  max-width: 680px;          /* was 520px */
  min-width: 260px;          /* was 200px */
  padding:18px 22px;         /* was 12px 16px */
  white-space: normal; word-break: break-word; overflow-wrap: anywhere;
  background:#fff; border:5px solid #000; /* border thicker */
  border-radius:22px;        /* was 16px */
  font-weight:900;
  font-size: clamp(18px, 2.0vw, 24px);  /* was 16px / 1.6vw / 20px */
  line-height:1.7;           /* a bit looser for readability */
  transform:scale(0);
  filter: drop-shadow(0 8px 0 rgba(0,0,0,.15)); /* deeper shadow */
  z-index:2;
}

.bubble.mascot{
  /* 贴着吉祥物，但更大一些的框 */
  left: calc(100% - 12px);   /* 稍微右移以给更粗边留空间 */
  bottom: 42%;               /* 提高一点，避免遮挡吉祥物脚部 */
  transform: translateY(20%);
  padding: 22px 26px;        /* was 16px 20px */
  max-width: clamp(320px, 40vw, 560px); /* was 260/34vw/440 */
  background:#fffbe6;
  border:5px solid #222;     /* was 4px */
  border-radius:24px;        /* was 20px */
  box-shadow:8px 8px 0 #00000040;
  font-size: clamp(20px, 2.2vw, 26px);  /* 更大的文字（覆盖 .bubble 通用设置） */
}

/* 左侧小尾巴同步放大并微调位置/阴影 */
.bubble.mascot::after{
  content:"";
  position:absolute;
  left:-20px;                /* was -16px */
  bottom:26px;               /* was 22px */
  border-width:14px;         /* was 12px */
  border-style:solid;
  border-color: transparent #fffbe6 transparent transparent;
  filter: drop-shadow(-3px 3px 0 #222);
}

/* Current item */
.current-item{
  display:flex; align-items:center; justify-content:center;
  height:clamp(140px, 18vh, 240px); margin-top:clamp(20px, 3vh, 40px); background:transparent; border:none;
}
.card.big{
  border:none; box-shadow:none; background:transparent; width:auto; height:auto;
  display:flex; flex-direction:column; align-items:center; gap:6px; cursor:grab; user-select:none;
}
.card.big .emoji{ font-size:clamp(50px, 8vw, 90px) }
.card.big .label{ font-size:clamp(14px, 2vw, 20px); font-weight:900; text-align:center }

/* ✈️ 飞机在右侧做螺旋滑翔 */
.plane {
  position: absolute;
  bottom: 60vh;        /* 初始高度：屏幕中上方 */
  right: 10%;           /* 控制水平位置（越小越靠右） */
  font-size: 96px;     /* 飞机大小 */
  line-height: 1;
  opacity: 0.9;
  animation: planeSpiralGlide 10s ease-in-out infinite;
  user-select: none;
  pointer-events: none;
  z-index: 2;
  will-change: transform;
}

/* ✈️ 螺旋上升 → 停顿 → 缓慢下降 → 再次上升 */
@keyframes planeSpiralGlide {
  0% {
    transform: translate(0, 0) rotate(0deg);
  }
  15% {
    transform: translate(-15px, -40px) rotate(6deg);   /* 开始向上 */
  }
  30% {
    transform: translate(15px, -80px) rotate(-5deg);   /* 更高位置 */
  }
  45% {
    transform: translate(-10px, -100px) rotate(4deg);  /* 顶点前停顿 */
  }
  55% {
    transform: translate(0, -100px) rotate(0deg);      /* 停顿在高处 */
  }
  70% {
    transform: translate(10px, -60px) rotate(-4deg);   /* 缓慢下降 */
  }
  85% {
    transform: translate(-10px, -20px) rotate(3deg);   /* 更低位置 */
  }
  100% {
    transform: translate(0, 0) rotate(0deg);           /* 回到底部，重新上升 */
  }
}

/* Bins */
.bins.three{ display:grid; grid-template-columns:repeat(3,1fr); gap:clamp(8px, 1.5vw, 20px); margin-top:clamp(30px, 6vh, 80px) }
.bin{ background:transparent; border:none; box-shadow:none; padding:6px 4px; min-height:0;
  display:flex; flex-direction:column; align-items:center; justify-content:flex-end }
/* 新的（给 PNG 用） */
.bin .can { margin-bottom: 6px; }
.bin .can img{
  width: clamp(110px, 14vw, 180px);         /* 桌面端大小：按需改 120~180 都可以 */
  height: auto;
  object-fit: contain;
  image-rendering: auto;
  filter: drop-shadow(0 4px 6px rgba(0,0,0,.2)); /* 可选小阴影 */
  user-select: none;
  pointer-events: none;  /* 重要：不阻挡 drop 事件 */
  transition: transform .15s ease;
}
.bin .can img:hover{ transform: scale(1.04); } /* 可选悬停效果 */
.bin .label{ font-weight:1000; text-align:center; color:#fff; padding:6px 10px; border-radius:10px; width:auto; font-size:clamp(16px, 2vw, 22px); }
.bin[data-type="waste"] .label{ background:var(--green) }
.bin[data-type="recycle"] .label{ background:var(--yellow); color:#222 }
.bin[data-type="rubbish"] .label{ background:var(--red) }
.bin.hot{ transform: translateY(-2px); transition: transform .08s }
.bin.shake{ animation: binShake .18s linear 2 }
@keyframes binShake{
  0%,100%{ transform: translateY(0) }
  25%{ transform: translateY(-2px) }
  75%{ transform: translateY(2px) }
}

/* Overlay */
.overlay{
  position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
  background:linear-gradient(135deg, rgba(255,255,255,.96), rgba(200,230,255,.96));
  backdrop-filter:saturate(120%) blur(2px);
  z-index:1000; transition:opacity .2s; pointer-events:auto;
}
.overlay.hide{ opacity:0; pointer-events:none }
.panel{
  width:min(560px,90vw); background:#fff; border:4px solid #000; border-radius:18px; padding:18px;
  text-align:center; box-shadow:12px 12px 0 #0003;
}
.panel h2{ margin:8px 0 12px }
.btn{
  background:#12b886; color:#fff; border:4px solid #0a7a5e; border-radius:14px;
  padding:10px 16px; font-weight:900; cursor:pointer;
  display:inline-flex; gap:8px; align-items:center;
  box-shadow:0 6px 0 #0a7a5e; transition:transform .08s;
}
.btn:active{ transform:translateY(1px) }
.medal{ font-size:48px; filter: drop-shadow(0 4px 0 rgba(0,0,0,.15)) }
.summary{ font-weight:900; margin:8px 0 14px }

.cover{
  width:100%; height:auto; max-height:300px; object-fit:contain;
  border-radius:14px; margin-bottom:10px; box-shadow:0 8px 18px rgba(0,0,0,.12);
}
.cover.small{ max-height:180px }

.rules{
  text-align:left; margin:10px 0 14px; padding-left:14px;
  font-size:15px; line-height:1.5;
}

/* 动画层 */
.beach-anim{
  position:fixed; inset:0; pointer-events:none; z-index:0
}
.cloud{
  position:absolute; top:8vh; width:180px; height:70px; border-radius:999px;
  background:rgba(255,255,255,.8); animation:cloudMove 60s linear infinite; will-change:transform;
}
.cloud.c1{ left:-220px; animation-duration:70s }
.cloud.c2{ left:-260px; animation-duration:82s; top:16vh }
.cloud.c3{ left:-180px; animation-duration:64s; top:12vh }
@keyframes cloudMove{ from{transform:translateX(0)} to{transform:translateX(120vw)} }
.gull{ position:absolute; top:14vh; left:-10vw; width:74px; opacity:.85; animation:gullFly 26s linear infinite; will-change:transform }
.gull.g1{ animation-duration:24s }
.gull.g2{ animation-duration:30s; top:18vh }
@keyframes gullFly{ from{transform:translateX(0)} to{transform:translateX(120vw)} }

/* 沙滩装饰层：在鲸鱼层之下，但在背景之上 */
.beach-decor{
  position:fixed; left:0; right:0; bottom:0; height:45vh;
  pointer-events:none; z-index:0.5;
}
.decor{
  position:absolute; width:min(22vw, 280px); height:auto;
  filter: drop-shadow(0 8px 0 rgba(0,0,0,.08)); opacity:.98;
}
.hut-tree.d1{ left:5%;  bottom:4vh; transform:translateY(0) rotate(-1deg) }
.hut-tree.d2{ right:6%; bottom:20vh; transform:scaleX(-1) scale(.95) rotate(1deg) }
.hut-tree.d3{ left:38%; bottom:3.5vh; transform:scale(.8) rotate(.5deg); opacity:.95 }

/* 鲸鱼层（仅海面以上可见），不挡交互 */
.whale-layer{
  position:fixed; left:0; right:0; top:0; height:45vh;
  overflow:hidden; pointer-events:none; z-index:0.75;
}
.whale{
  position:absolute; width:min(18vw, 220px); height:auto;
  left:4vw; bottom:-8px; filter: drop-shadow(0 10px 0 rgba(0,0,0,.08)); opacity:0; will-change:transform;
}
.whale.jump{ animation: whaleJump 4.8s cubic-bezier(.35,.02,.23,1) infinite }
.whale.jump.delay{ animation-delay:2.2s }
@keyframes whaleJump{
  0%{ transform: translate(0, 12px) rotate(-6deg); opacity:0 }
  6%{ opacity:1 }
  25%{ transform: translate(10vw, -12vh) rotate(-2deg) }
  50%{ transform: translate(18vw, -18vh) rotate(6deg) }
  75%{ transform: translate(26vw, -10vh) rotate(12deg) }
  94%{ opacity:1 }
  100%{ transform: translate(34vw, 12px) rotate(16deg); opacity:0 }
}

/* 响应式：小屏优化避免遮挡 */
@media (max-width: 980px){
  .stage{ grid-template-columns:1fr }
  .left{ min-height:0 }
  .right{ min-height:0; padding-bottom:12px }
  .airdrop{ height:clamp(180px, 30vh, 300px); margin-top:12px }
  .plane{ font-size:clamp(60px, 10vw, 84px) }
  img.plane{ width:clamp(70px, 12vw, 96px) }
  .current-item{ margin-top:clamp(20px, 4vh, 48px); height:clamp(150px, 20vh, 230px) }
  .bins.three{ margin-top:clamp(20px, 4vh, 40px) }
  .card.big .emoji{ font-size:clamp(40px, 8vw, 58px) }
  .card.big .label{ font-size:clamp(14px, 3vw, 16px) }
  .bin .can img{ width: clamp(100px, 20vw, 160px) }

  /* 手机端只保留左侧装饰，避免右侧遮挡 bins */
  .hut-tree.d2{ display:none }

  /* 吉祥物略缩，气泡宽度也略缩 */
  .mascot{ left:-40px; bottom:40px }
  .mascot img{ width: clamp(150px, 28vw, 250px) }
  .bubble.mascot{ max-width: clamp(200px, 50vw, 320px) }
}

/* 低动效偏好：减少动画 */
@media (prefers-reduced-motion: reduce){
  .plane, .gull, .cloud, .whale.jump{ animation: none !important }
}

/* =========================
   Kids Game Font System
   ========================= */
:root{
  /* 统一字体变量：圆润可爱 + 现有 Nunito 作为 UI 正文字体 */
  --font-display: "Baloo 2", "Nunito", system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
  --font-ui: "Nunito", system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;

  /* 自适应字号刻度（clamp 最小 / 理想 / 最大） */
  --fs-xs: clamp(12px, 1.2vw, 14px);
  --fs-sm: clamp(14px, 1.4vw, 16px);
  --fs-md: clamp(16px, 1.6vw, 18px);
  --fs-lg: clamp(18px, 2.0vw, 22px);
  --fs-xl: clamp(22px, 2.6vw, 28px);
  --fs-xxl: clamp(28px, 3.4vw, 40px);
  --fs-hero: clamp(32px, 4.2vw, 52px);
}

/* 全局：用 Nunito 做正文，稍微加粗一点显童趣 */
body{
  font-family: var(--font-ui);
  font-weight: 700;
  letter-spacing: 0.2px;
}

/* 顶部游戏标题 h1：大、圆、显眼 */
header h1{
  font-family: var(--font-display);
  font-size: var(--fs-xl);
  font-weight: 800;
  letter-spacing: 0.5px;
  line-height: 1.1;
}

/* 弹窗标题（Ready to Clean the Beach? / Time’s Up!）：更大一级 */
.panel h2{
  font-family: var(--font-display);
  font-size: var(--fs-xxl);
  font-weight: 800;
  line-height: 1.15;
  margin: 10px 0 14px;
}

/* 顶部 HUD 的小胶囊文字：稳一点，不抢戏 */
#hud .chip{
  font-size: var(--fs-sm);
  font-weight: 800;
}

/* 按钮：大、厚、适合小朋友点击 */
.btn{
  font-size: var(--fs-md);
  font-weight: 900;
  letter-spacing: 0.2px;
}

/* 提示（hint）：要更大更醒目（你特别要求放大） */
.hint{
  font-family: var(--font-display);
  font-size: var(--fs-lg);
  font-weight: 800;
  letter-spacing: 0.4px;
}

/* 规则说明：比正文略大一点，行距更舒适 */
.rules{
  font-size: var(--fs-md);
  line-height: 1.65;
  font-weight: 700;
}

/* 垃圾桶标签：更醒目（WASTE/RECYCLE/RUBBISH） */
.bin .label{
  font-family: var(--font-display);
  font-size: var(--fs-lg);
  font-weight: 1000;
  letter-spacing: 0.5px;
}

/* 当前物品卡片文字（大 emoji 下面的标签） */
.card.big .label{
  font-family: var(--font-display);
  font-size: var(--fs-lg);
  font-weight: 900;
}

/* 结算页分数文字 */
.summary{
  font-size: var(--fs-lg);
  font-weight: 900;
}

/* 气泡对白：保持你原有的放大逻辑，但字体更童趣 */
.bubble{
  font-family: var(--font-display);
  font-size: clamp(18px, 2.0vw, 24px);
  font-weight: 900;
}
.bubble.mascot{
  font-size: clamp(20px, 2.2vw, 26px);
}

/* 小屏优化：标题与 hint 再放大一点，按钮不缩 */
@media (max-width: 980px){
  header h1{ font-size: clamp(24px, 6vw, 34px); }
  .hint{ font-size: clamp(18px, 4.4vw, 24px); }
  .btn{ font-size: clamp(16px, 4.2vw, 20px); }
  .panel h2{ font-size: clamp(24px, 6.2vw, 36px); }
}
